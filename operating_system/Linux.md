## 简介

严格来讲，Linux 这个词本身只表示 Linux 内核。

各种 Linux 发行版：Red Hat 的 CentOS，Debian 的 Ubuntu。



## 1.常用操作

Linux 命令大全：man.linuxde.net。

#### 快捷键

Tab：命令和文件名补全。

Ctrl+C：中断正在运行的程序。

Ctrl+D：结束键盘输入 EOF。

#### 求助

--help：指令的基本用法与选项介绍。

man：将指令的具体信息显示出来。

info：与 man 类似，但是 info 将文档分成一个个页面，每个页面可以进行跳转。

doc：/usr/share/doc 存放着软件的一整套说明文件。

#### 关机

shutdown：关机。

who：查看有没有其它用户在线。

sync：为了加快对磁盘文件的读写速度，位于内存中的文件数据不会立即同步到磁盘上，因此关机之前需要先进行 sync 同步操作。

reboot：重开机。



sudo 允许一般用户使用 root 可执行的命令，不过只有在 /etc/sudoers 配置文件中添加的用户才能使用该指令。



## 2.文件

Linux 系统一切都是文件。

文件系统：Ext2 和 FAT。

#### inode

扇区 sector：硬盘的最小存储单位。

块 block：存储文件的内容，由多个 sector 组成。一个文件可能会占用多个 block，但是一个 block 只能存放一个文件（因为数据是由 inode 指向的，如果有两个文件的数据存放在同一个块中，就会乱套了）。

索引节点 inode：存储文件的元信息 metadata，如文件的属性和所在的 block 编号。每个文件都有一个 inode。linux/unix 文件系统的基础。

stat：查看文件的 inode 信息。

superblock：记录文件系统的整体信息，包括 inode 和 block 的总量、使用量、剩余量，以及文件系统的格式与相关信息等。

block bitmap：记录 block 是否被使用的位图。

对于 Ext2 文件系统，当要读取一个文件的内容时，先在 inode 中查找文件内容所在的所有 block，然后把所有 block 的内容读出来。

而对于 FAT 文件系统，它没有 inode，每个 block 中存储着下一个 block 的编号。

#### 文件类型

普通文件 -：用于存储信息和数据， Linux 用户可以根据访问权限对普通文件进行查看、更改、删除。比如：图片、声音、PDF、text、视频、源代码等等。

目录文件 d：目录也是文件的一种，用于表示和管理系统中的文件，目录文件中包含一些文件名和子目录名。打开目录事实上就是打开目录文件。：

链接文件 l：保留了指向文件的地址而不是文件本身。

字符设备 c：用来访问字符设备比如硬盘。

设备文件 b：用来访问块设备比如硬盘、软盘。

管道文件 p：一种特殊类型的文件，用于进程之间的通信。

套接字文件 s：用于进程间的网络通信，也可以用于本机之间的非网络通信。

#### 基本操作

ls：列出文件或者目录的信息，目录的信息就是其中包含的文件。ll 是 ls -l 的别名，ll 命令可以看到该目录下的所有目录和文件的详细信息。

cp、rm 和 mv：复制、删除和移动（重命名）文件或目录。

cat：取得文件内容。

more：一页一页查看文件内容。空格键显示下一页，回车键显示下一行。

less：和 more 类似。pgup 和 pgdn 翻页。

head：只看文件的头几行。

tail：只看文件的最后几行。用来看日志信息。

touch：修改文件时间或者建立新文件。

vim：编辑文件内容。分为一般模式、编辑模式、命令行模式。i，ESC，:wq。

file：查看文件类型。

which：命令查找，通过 PATH 变量来查找文件名。

whereis、locate 和 find：文件名查找。whereis 和 locate 到数据库文件去查找，而不实际查找文件系统。find 直接查询文件系统。

chmod：修改权限 rwx。文件类型（- 文件，d 文件夹，l 软链接）、所有者 u、所在组 g、其它组 o。超级用户可以无视普通用户的权限，即使文件目录权限是 000，依旧可以访问。

ln：链接。

**文件和目录权限的区别**

r：文件可以使用 cat 查看文件的内容，目录可以查看目录下列表。

w：文件可以修改文件的内容，目录可以创建和删除目录下文件。

x：文件可以将其运行为二进制文件，目录可以使用 cd 进入目录。



## 3.目录

Linux 目录配置标准 FHS：/bin，/dev...

绝对路径和相对路径

目录树：所有可操作的计算机资源都存在于目录树这个结构中，对计算资源的访问，可以看做是对这棵目录树的访问。

#### 常见目录

/bin：存放二进制可执行文件（ls、cat、mkdir 等），常用命令一般都在这里。

/etc：存放系统管理和配置文件。

/home：存放所有用户文件的根目录，是用户主目录的基点，比如用户 user 的主目录就是/home/user，可以用 ~user 表示。

/usr ：用于存放系统应用程序。

/opt：额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把 tomcat 等都安装到这里。

/proc：虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息。

/root：系统管理员的主目录。

/sbin：存放二进制可执行文件，只有 root 才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序，如 ifconfig 等。

/dev：用于存放设备文件。

/mnt：系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统。

/boot：存放用于系统引导时使用的各种文件。

/lib：存放着和系统运行相关的库文件。

/tmp：用于存放各种临时文件，是公用的临时文件存储点。

/var：用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比如各种服务（如系统启动）的日志文件。

/lost+found：这个目录平时是空的，系统非正常关机而留下无家可归的文件就在这里。

#### 基本操作

cd：更换目录。上一层目录 .. 或 ../，系统根目录 /，用户主目录 ~，上一个操作所在目录 -。

pwd：显示当前目录。

mkdir 和 rmdir：创建和删除目录。

df 和 du：目录和磁盘的容量。

find：查找目录。



## 4.磁盘

fdisk：磁盘分区
mkfs：文件系统格式化
fsck 和 badblocks：磁盘检验
mount：磁盘挂载
mknod：磁盘参数修改

基本输入输出系统 BIOS：是开机的时候计算机执行的第一个程序，知道可以开机的磁盘，并读取磁盘第一个扇区的主要开机记录 MBR，由 MBR 执行其中的开机管理程序，这个开机管理程序会加载操作系统的核心文件。



## 5.压缩和打包

压缩：gzip，bzip2。

打包：tar。打包并压缩 tar -zcvf，解压 tar -xvf。

完整备份与恢复：dump 和 restore。



## 6.bash

可以通过 shell 请求内核提供服务，bash 正是 shell 的一种。shell 是 kernel 和硬件的接口。

变量：环境变量 PATH 和自定义变量。

数据流重定向：输出 > 和 >>。

管道命令：一个命令的输出作为另一个命令的输入 ｜。

shell script

#### 基本操作

type：判断命令是否为 bash 内置命令。

echo：显示变量。

set：查看变量。

alias：命令别名设置。

history：历史命令。



## 7.正则表达式

处理字符串的方法，通过一些特殊符号的辅助，可以让用户轻易达到查找、删除、替换某特定字符串的处理程序。

搜索 grep、sed 和 awk 工具。



## 8.进程管理

ps：查看某个时间点的进程信息。

kill：杀死进程。kill -9 强制终止。

pstree：查看进程树。

top：实时显示进程信息。

netstat：查看占用端口的进程。

进程状态

SIGCHLD

孤儿进程：一个父进程退出，而它的一个或多个子进程还在运行。孤儿进程将被 init 进程（进程号为 1）所收养，并由 init 进程对它们完成状态收集工作。孤儿进程不会对系统造成危害。

僵尸进程：如果子进程退出，而父进程并没有调用 wait() 或 waitpid()，那么子进程的进程描述符仍然保存在系统中，这种进程称之为僵尸进程。系统所能使用的进程号是有限的，如果产生大量僵尸进程，将因为没有可用的进程号而导致系统不能产生新的进程。要消灭系统中大量的僵尸进程，只需要将其父进程杀死，此时僵尸进程就会变成孤儿进程。              

​              

## 9.网络

ifconfig：查看当前系统的网卡信息。

ping：查看与某台机器的连接情况。

hostname

service network

service iptables：防火墙

Linux 系统上查看项目的运行状态：查看日志和进程运行情况。

namespace：是 Linux 内核用来隔离内核资源的方式。

使得处于不同 namespace 的进程拥有独立的全局系统资源，通过 namespace 可以让一些进程只能看到与自己相关的一部分资源，其他 namespace 内的进程不可见。

Linux 内核实现 namespace 的一个主要目的就是实现轻量级虚拟化 (容器) 服务。为 docker 等容器技术的出现和发展提供了基础条件。

Linux 下删除正在进行读写操作的文件

当用户执行 rm 操作后，ls 或者其他文件管理命令不再能够找到这个文件，但是进程却依然在继续正常执行，依然能够从文件中正确的读取内容。

每个文件都有 2 个 link 计数器 —— i_count 和 i_nlink。i_count 的意义是当前使用者的数量，i_nlink 的意义是介质连接的数量。或者可以理解为 i_count 是内存引用计数器，i_nlink 是硬盘引用计数器。再换句话说，当文件被某个进程引用时，i_count 就会增加；当创建文件的硬连接的时候，i_nlink 就会增加。

rm 操作只是将 i_nlink 置为 0 了。由于文件被进程引用的缘故，i_count 不为 0。