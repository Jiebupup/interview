## 简介

Git 是一个分布式版本控制软件，由 Linus Torvalds 为更好地管理 Linux 内核开发而设计。

**版本控制**

一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。除了项目源代码，你可以对任何类型的文件进行版本控制。

有了版本控制就可以将某个文件回溯到之前的状态，甚至将整个项目都回退到过去某个时间点的状态，可以比较文件的变化细节，查出最后是谁修改了哪个地方，从而找出导致怪异问题出现的原因，又是谁在何时报告了某个功能缺陷等等。

**Git 与其他版本管理系统的主要差别**

Git 对待数据的方式是直接记录快照，把代码仓库完整地备份下来，而非差异比较。

Git 更像是把数据看作是对小型文件系统的一组快照。每次你提交更新，或在 Git 中保存项目状态时，它主要对当时的全部文件制作一个快照并保存这个快照的索引。Git 对待数据更像是一个快照流。

**Git 与集中式 SVN 的区别**

集中式版本控制只有中心服务器拥有一份代码，而分布式版本控制每个人的电脑上就有一份完整的代码。修改了某个文件后，你只需要将自己的修改推送给别人就可以了。但是，在实际使用分布式版本控制系统的时候，很少会直接进行推送修改，而是使用一台机器充当中央服务器。这个服务器的作用仅仅是用来方便交换大家的修改。

集中式版本控制有安全性问题，当中心服务器挂了所有人都没办法工作了。而分布式没有安全性问题。

集中式版本控制需要连网才能工作，如果网速过慢，那么提交一个文件会慢的无法让人忍受。而分布式版本控制不需要连网就能工作。

集中式版本控制新建一个分支相当于复制一份完整代码，而分布式版本控制新建分支、合并分支操作速度非常快。                              

**中心服务器**

用来交换每个用户的修改，没有中心服务器也能工作，但是中心服务器能够 24 小时保持开机状态，这样就能更方便的交换修改。Github 就是一个中心服务器。

**Git 的三种状态**

已修改：修改了文件，但还没保存到暂存区中。

已暂存：对一个已修改文件的当前版本做了标记，使之包含在下次提交的快照中。

已提交：数据已经安全的保存在版本库中。

**基本的 Git 工作流程**

在工作区中修改文件。将文件的快照放入暂存区中。将快照永久性提交到版本库中。



## 1.工作流

新建一个仓库之后，当前目录就成为了工作区 Working Directory，工作区下有一个隐藏目录 .git，它属于 Git 的版本库。
Git 的版本库有暂存区 Stage 和版本库 History。History 存储所有分支信息。
Working Directory <-> Stage <-> History

操作：
add files：把文件的修改添加到暂存区。
commit：把暂存区的修改提交到当前分支，提交之后暂存区就被清空了。
reset -- files：commit 的逆操作。
checkout -- files：add files 的逆操作。
commit -a：工作区 -> History。
checkout HEAD -- files：History -> 工作区。
clone：远程共享库 -> 本地库。
pull：远程共享库 -> 工作区。
push：本地库 -> 远程共享库。



## 2.其他

分支：
使用指针将每个提交连接成一条时间线，HEAD 指针指向当前分支指针。
新建分支是新建一个指针指向时间线的最后一个节点，并让 HEAD 指针指向新分支，表示新分支成为当前分支。
每次提交只会让当前分支指针向前移动，而其它分支指针不会移动。
合并分支也只需要改变指针即可。

冲突：当两个分支都对同一个文件的同一行进行了修改，在分支合并时就会产生冲突。
Git 会使用 <<<<<<<，=======，>>>>>>> 标记出不同分支的内容，只需要把不同分支中冲突部分修改成一样就能解决冲突。

快进式合并 fast-farward merge：会直接将 master 分支指向合并的分支，这种模式下进行分支合并会丢失分支信息，也就不能在分支历史上看出分支信息。
可以在合并时加上 --no-ff 参数来禁用 Fast forward 模式，并且加上 -m 参数让合并时产生一个新的 commit。

分支管理策略：master 分支应该是非常稳定的，只用来发布新版本。日常开发在开发分支 dev 上进行。

储藏 Stashing：
在一个分支上操作之后，如果还没有将修改提交到分支上，此时进行切换分支，那么另一个分支上也能看到新的修改。这是因为所有分支都共用一个工作区的缘故。
可以使用 git stash 将当前分支的修改储藏起来，此时当前工作区的所有修改都会被存到栈中，也就是说当前工作区是干净的，没有任何未提交的修改。此时就可以安全的切换到其它分支上了。
该功能可以用于 bug 分支的实现。如果当前正在 dev 分支上进行开发，但是此时 master 上有个 bug 需要修复，但是 dev 分支上的开发还未完成，不想立即提交。在新建 bug 分支并切换到 bug 分支之前就需要使用 git stash 将 dev 分支的未提交修改储藏起来。

SSH 传输设置：Git 仓库和 Github 中心仓库之间的传输是通过 SSH 加密。

.gitignore 文件忽略：操作系统自动生成的文件，编译生成的中间文件，自己的敏感信息。不需要全部自己编写。